{"ast":null,"code":"import * as Tone from 'tone';\nimport { generateUniqId } from '../utilities';\nimport { loadSamples } from './oud_samples_buffer';\nvar samples = loadSamples();\n\nfunction generateScale() {\n  var keys = [];\n\n  for (var step = 0; step < 5; step++) {\n    var octave = step < 5 ? 0 : Math.floor(step / 5);\n    var position = step < 5 ? step + 1 : step + 1 - octave * 5;\n    var note = void 0;\n\n    switch (position) {\n      case 1:\n        note = \"A\".concat(octave);\n        break;\n\n      case 2:\n        note = \"B\".concat(octave);\n        break;\n\n      case 3:\n        note = \"C\".concat(octave);\n        break;\n\n      case 4:\n        note = \"D\".concat(octave);\n        break;\n\n      case 5:\n        note = \"E\".concat(octave);\n        break;\n    }\n\n    keys.push(note);\n  }\n\n  return keys;\n}\n\nfunction getBufferedSampleUrls() {\n  var bufferedSampleUrls = {};\n  var scale = generateScale();\n  scale.forEach(function (key, i) {\n    bufferedSampleUrls[key] = samples[i];\n  });\n  return bufferedSampleUrls;\n}\n\nvar samplerSettings = {\n  volume: 0,\n  attack: 0,\n  release: 0,\n  curve: 'linear',\n  urls: getBufferedSampleUrls(),\n  baseUrl: 'http://localhost:3000'\n};\nvar freeverbSettings = {\n  wet: 0.9,\n  roomSize: 0.08,\n  dampening: 40\n};\nvar channelSettings = {\n  volume: -6,\n  pan: 0,\n  mute: false,\n  solo: false\n};\nvar pitchShiftSettings = {\n  wet: 0,\n  pitch: 0,\n  windowSize: 0.1,\n  delayTime: 0,\n  feedback: 0\n};\nvar samplerNode = new Tone.Sampler(samplerSettings);\nvar freeverbNode = new Tone.Freeverb(freeverbSettings);\nvar pitchShiftNode = new Tone.PitchShift(pitchShiftSettings);\nvar channelNode = new Tone.Channel(channelSettings).toDestination();\nsamplerNode.chain(freeverbNode, channelNode, pitchShiftNode);\nvar v = 1;\nvar d = '4n';\nvar partSettings = {\n  scale: generateScale(),\n  sequence: [{\n    time: '0:0:0',\n    noteName: 'A1',\n    duration: d,\n    velocity: v\n  }, {\n    time: '0:1:0',\n    noteName: 'A1',\n    duration: d,\n    velocity: v\n  }, {\n    time: '0:2:0',\n    noteName: 'A1',\n    duration: d,\n    velocity: v\n  }, {\n    time: '0:3:0',\n    noteName: 'A1',\n    duration: d,\n    velocity: v\n  }, {\n    time: '1:0:0',\n    noteName: 'A1',\n    duration: d,\n    velocity: v\n  }, {\n    time: '1:1:0',\n    noteName: 'A1',\n    duration: d,\n    velocity: v\n  }, {\n    time: '1:2:0',\n    noteName: 'A1',\n    duration: d,\n    velocity: v\n  }, {\n    time: '1:3:0',\n    noteName: 'A1',\n    duration: d,\n    velocity: v\n  }]\n};\nvar partNode = new Tone.Part(function (time, note) {\n  samplerNode.triggerAttackRelease(note.noteName, note.duration, time, note.velocity);\n}, []);\npartNode.loopEnd = '2m';\npartNode.loop = true;\nvar instrument = [{\n  id: generateUniqId(),\n  name: 'Sequencer',\n  type: 'Sequencer',\n  node: partNode,\n  settings: partSettings\n}, {\n  id: generateUniqId(),\n  name: 'Oud Sampler',\n  type: 'Sampler',\n  node: samplerNode,\n  settings: samplerSettings\n}, {\n  id: generateUniqId(),\n  name: 'Freeverb',\n  type: 'FreeverbEffect',\n  node: freeverbNode,\n  settings: freeverbSettings\n}, {\n  id: generateUniqId(),\n  name: 'Channel',\n  type: 'Channel',\n  node: channelNode,\n  settings: channelSettings\n}, {\n  id: generateUniqId(),\n  name: 'Pitch Shift',\n  type: 'PitchShiftEffect',\n  node: pitchShiftNode,\n  settings: pitchShiftSettings\n}];\nexport { instrument };","map":{"version":3,"names":["Tone","generateUniqId","loadSamples","samples","generateScale","keys","step","octave","Math","floor","position","note","push","getBufferedSampleUrls","bufferedSampleUrls","scale","forEach","key","i","samplerSettings","volume","attack","release","curve","urls","baseUrl","freeverbSettings","wet","roomSize","dampening","channelSettings","pan","mute","solo","pitchShiftSettings","pitch","windowSize","delayTime","feedback","samplerNode","Sampler","freeverbNode","Freeverb","pitchShiftNode","PitchShift","channelNode","Channel","toDestination","chain","v","d","partSettings","sequence","time","noteName","duration","velocity","partNode","Part","triggerAttackRelease","loopEnd","loop","instrument","id","name","type","node","settings"],"sources":["/Users/alicegurova/art-pactice/ADC-Generative-Art-Boilerplate-2023/app/javascript/prototypes/prototype_10/tunes/oud_sampler.js"],"sourcesContent":["import * as Tone from 'tone'\nimport { generateUniqId } from '../utilities'\nimport { loadSamples } from './oud_samples_buffer'\n\nconst samples = loadSamples()\n\nfunction generateScale() {\n  const keys = []\n\n  for (let step = 0; step < 5; step++) {\n    const octave = step < 5 ? 0 : Math.floor(step / 5)\n    const position = step < 5 ? step + 1 : step + 1 - octave * 5\n    let note\n\n    switch (position) {\n      case 1:\n        note = `A${octave}`\n        break\n      case 2:\n        note = `B${octave}`\n        break\n      case 3:\n        note = `C${octave}`\n        break\n      case 4:\n        note = `D${octave}`\n        break\n      case 5:\n        note = `E${octave}`\n        break\n    }\n\n    keys.push(note)\n  }\n\n  return keys\n}\n\nfunction getBufferedSampleUrls() {\n  const bufferedSampleUrls = {}\n  const scale = generateScale()\n\n  scale.forEach((key, i) => {\n    bufferedSampleUrls[key] = samples[i]\n  })\n\n  return bufferedSampleUrls\n}\n\nconst samplerSettings = {\n  volume: 0,\n  attack: 0,\n  release: 0,\n  curve: 'linear',\n  urls: getBufferedSampleUrls(),\n  baseUrl: 'http://localhost:3000'\n}\n\nconst freeverbSettings = {\n  wet: 0.9,\n  roomSize: 0.08,\n  dampening: 40\n}\n\nconst channelSettings = {\n  volume: -6,\n  pan: 0,\n  mute: false,\n  solo: false\n}\n\nconst pitchShiftSettings = {\n  wet: 0,\n  pitch: 0,\n  windowSize: 0.1,\n  delayTime: 0,\n  feedback: 0\n}\n\nconst samplerNode = new Tone.Sampler(samplerSettings)\nconst freeverbNode = new Tone.Freeverb(freeverbSettings)\nconst pitchShiftNode = new Tone.PitchShift(pitchShiftSettings)\nconst channelNode = new Tone.Channel(channelSettings).toDestination()\nsamplerNode.chain(freeverbNode, channelNode, pitchShiftNode)\n\nconst v = 1\nconst d = '4n'\n\nconst partSettings = {\n  scale: generateScale(),\n  sequence: [\n    {\n      time: '0:0:0',\n      noteName: 'A1',\n      duration: d,\n      velocity: v\n    },\n    {\n      time: '0:1:0',\n      noteName: 'A1',\n      duration: d,\n      velocity: v\n    },\n    {\n      time: '0:2:0',\n      noteName: 'A1',\n      duration: d,\n      velocity: v\n    },\n    {\n      time: '0:3:0',\n      noteName: 'A1',\n      duration: d,\n      velocity: v\n    },\n    {\n      time: '1:0:0',\n      noteName: 'A1',\n      duration: d,\n      velocity: v\n    },\n    {\n      time: '1:1:0',\n      noteName: 'A1',\n      duration: d,\n      velocity: v\n    },\n    {\n      time: '1:2:0',\n      noteName: 'A1',\n      duration: d,\n      velocity: v\n    },\n    {\n      time: '1:3:0',\n      noteName: 'A1',\n      duration: d,\n      velocity: v\n    }\n  ]\n}\n\nconst partNode = new Tone.Part(function (time, note) {\n  samplerNode.triggerAttackRelease(\n    note.noteName,\n    note.duration,\n    time,\n    note.velocity\n  )\n}, [])\n\npartNode.loopEnd = '2m'\npartNode.loop = true\n\nconst instrument = [\n  {\n    id: generateUniqId(),\n    name: 'Sequencer',\n    type: 'Sequencer',\n    node: partNode,\n    settings: partSettings\n  },\n  {\n    id: generateUniqId(),\n    name: 'Oud Sampler',\n    type: 'Sampler',\n    node: samplerNode,\n    settings: samplerSettings\n  },\n  {\n    id: generateUniqId(),\n    name: 'Freeverb',\n    type: 'FreeverbEffect',\n    node: freeverbNode,\n    settings: freeverbSettings\n  },\n  {\n    id: generateUniqId(),\n    name: 'Channel',\n    type: 'Channel',\n    node: channelNode,\n    settings: channelSettings\n  },\n  {\n    id: generateUniqId(),\n    name: 'Pitch Shift',\n    type: 'PitchShiftEffect',\n    node: pitchShiftNode,\n    settings: pitchShiftSettings\n  }\n]\n\nexport { instrument }\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}